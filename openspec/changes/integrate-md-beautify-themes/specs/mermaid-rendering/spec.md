## 新增需求

### 需求:Mermaid 图表渲染
系统必须支持在预览视图中渲染 Mermaid 代码块，渲染方式必须为 SVG 格式。

#### 场景:渲染流程图
- **当** 预览内容包含 ```mermaid 代码块，内容为流程图语法
- **那么** 系统必须将其渲染为 SVG 格式的流程图

#### 场景:渲染时序图
- **当** 预览内容包含 ```mermaid 代码块，内容为时序图语法
- **那么** 系统必须将其渲染为 SVG 格式的时序图

#### 场景:渲染类图
- **当** 预览内容包含 ```mermaid 代码块，内容为类图语法
- **那么** 系统必须将其渲染为 SVG 格式的类图

### 需求:Mermaid 主题适配
系统必须根据当前明暗模式选择合适的 Mermaid 主题，亮色模式使用 base 主题，暗色模式使用 dark 主题。

#### 场景:亮色模式 Mermaid
- **当** 当前为亮色模式且渲染 Mermaid 图表
- **那么** 必须使用 Mermaid 的 base 主题

#### 场景:暗色模式 Mermaid
- **当** 当前为暗色模式且渲染 Mermaid 图表
- **那么** 必须使用 Mermaid 的 dark 主题

### 需求:Mermaid 渲染错误处理
系统必须在 Mermaid 渲染失败时显示错误信息，而不是空白或崩溃。

#### 场景:渲染失败显示错误
- **当** Mermaid 图表语法错误导致渲染失败
- **那么** 系统必须显示错误信息提示用户

### 需求:Mermaid 复制处理
当复制包含 Mermaid 图表的内容到微信时，系统必须将 SVG 转换为图片或保留原始代码块。

#### 场景:复制时保留图表
- **当** 用户复制包含 Mermaid 图表的内容
- **那么** 复制的内容必须包含可显示的图表或原始代码
